# Элементы теории операционных систем
### Классификация ОС
Существует много критериев для классификации ОС:
- по виду и составу вычислительной системы
	- ОС универсальных ЭВМ третьего поколения
	- ОС персональных компьютеров
	- ОС СЦВМ
	- ОС рабочих многотерминальных станций
	- ОС сетевых и распределенных вычислительных систем
	- ОС супер-ЭВМ (векторно-конвейерных, кластерных систем и пр.)
	- ОС мобильных устройств
- по отношению к пользователям
	- многопользовательские
	- однопользовательские
- по режиму вычислительного процесса
	- системы пакетной обработки (задания выполняются последовательно друг за другом)
	- системы разделения времени 
	- системы реального времени
- по технологии разработки и способу распространения
	- ПО с открытым кодом
	- свободно распространяемое ПО
	- ПО с закрытым кодом, распространяемое на основе платных лицензий.

### Типичный состав современной ОС
1. Обработчики прерываний и супервизоры
2. Планировщики
3. Система управления процессами и ресурсами
4. Программы управления основной памятью
5. Программы управления виртуальной памятью
6. Программы файловой системы
7. Оболочки
8. Система генерации

Современные ОС обладают слоистой структурой: приложения -> утилиты -> оболочки  -> ядро -> аппаратура

Слоистая структура операционной системы впервые была предложена и реализована Дейкстрой в 1960 году.

### Ядро операционной системы
**Ядро** -- комплекс небольших программ, постоянно присутствующих (резидентных) в оперативной памяти и выполняющих следующие основные функции:
1. Обработка прерываний
2. Создание и уничтожение процессов
3. Переключение процессов из состояния в состояние
4. Диспетчирование процессов
5. Приостановка и активизация процессов
6. Синхронизация процессов
7. Поддержка операций ввода и вывода
8. Поддержка распределения и перераспределения основной памяти
9. Поддержка работы файловой системы
10. Обслуживание аппараратного контроля вычислительной системы

В ядро вклю чают те программы, которые наиболее часто используются, не требуют частой динамической настройки и обеспечивают быструю реакцию системы на различные события в аппаратуре ВС. Как правило, это различные супервизорные программы и обработчики прерываний.

Супервизорные программы и обработчики прырываний бывают нескольких типов:
- первого рода: полностью резидентные
- второго рода -- частично резидентные
- третьего рода -- резидентные по условию


Различают два режима работы вычислительной системы:
- режим супервизора: обеспечивает возможность выполнения любых команд -- привилегированных и непривилегированных
- режим задачи -- возможность выполнять только непривилегированные команды

Переход из режима в режим осуществляется специальными командами посредством внутренних супервизорных прерываний. Тем самым обеспечивается первый уровень защиты ОС.

## Планировщики
**Планировщики** -- программы, отвечающие за распределение времени процессора конкретным процессам. Они различаются по уровню планирования:
- диспетчеры
- планировщики первого уровня (оперативные)
- планировщики второго уровня (долговременные)

Основная функция всех планировщиков -- обеспечить предоставление процессора по очереди всем существующим в системе активным процессам с учетом их приоритетов и текущего состояния системы. Для этого используются различные алгоритмы планирования.

Наиболее распространённым алгоритмом оперативного планирования в настоящее время является круговой циклический алгоритм (**RR-алгоритм**). В этом алгоритме каждому процессу по очереди выделяется определённый квант процессорного времени, по истечении которого происходит передача управления следующему активному процессу.

Для долговременного планирования чаще используются такие приоритетные алгоритмы, как
- **SJF** -- кратчайшее задание выполняется первым
- **SRT** -- наибольшим приоритетом обладает задание, до окончания выполнения которого остаётся наименьшее время
и так далее.

Приоритеты планирования бывают
- динамические
- абсолютные
- относительные

Классическим примером динамического приоритетного планирования является алгоритм КОРБАТО. В этом алгоритме поддерживается несколько приоритетных уровней. На каждом уровне реализуется дисциплина обслуживания типа FIFO (очередь). После выделения процессу очередного кванта времени процесс переводится на уровень с более низким приоритетом. Тем самым обеспечивается равномерное продвижение в системе всех активных задач. Количество уровней планирования может быть различным в зависимости от режима вычислительного процесса и типа ВС

## Управление процессами и ресурсами системы
Обычно под **процессом** в ОС понимают совокупность программы и данных, которые обрабатываются на некотором процессоре. В некоторых системах используется термин "задача", что является синонимом процесса. 

Понятие процесса неотделимо от понятия "ресурс".

Под **ресурсом** понимается любой объект, который может быть распределён процессу для его выполнения. Это устройства вычислительной системы, оперативная память, линии связи и т.д.

Реаличают ресурсы потребляемые (CR) и повторно используемые (SR).

**CR-ресурсы** после использования в систему не возвращаются (в неизменном виде). К числу этих ресурсов относятся изменяемые структуры данных и процедуры, а также информационные ресурсы (различные сигналы и сообщения)

**SR-ресурсы** после использования процессом возвращаются в систему в неизменном видеи могут повторно использоваться.К числу таких ресурсов относятся все аппаратные ресурсы, а также неизменяемые структуры данных и процедуры.

Под **управлением** процессами и ресурсами понимается решение следующих задач:
1. Изменение статуса процесса (выполняется, готов, блокированЮ приостановлен). 
2. Синхронизация двух и более процессов. 
3. Решение проблемы взаимных блокировок


Изменение статуса процесса выполняется при наступлении некоторых событий, которые отслеживаются программами ядра. Эти изменения соответствуют графу состояний процесса.

Синхронизация процессов необходима, если эти процессы используют общие ресурсы. Синхронизация выполняется с помощью так называемых двоичных семафоров Дейкстры или мониторов Хоара.

**Двоичный семафор** -- переменная, принимающая только значения 0 или 1 и над которой определены две неделимые операции. С каждым семафором связана **критическая секция** в программе процесса. Семафор позволяет только одному процессу войти в критическую секцию. Только в своей критической секции процессу разрешается выполнять действия над **критическим ресурсом**. Критическим считается ресурс, которым одновременно может владеть только один процесс.

**Монитор Хоара** редставляет собою комплекс процедур и структур данных, который также регулирует использование процессами критических ресурсов.


## Управление основной памятью

Необходимость управления основной памятью возникает вследствие ограниченного размера ОП в современных ВС. Эта проблема усугубляется в условиях мультипрограммирования, когда необходимо в ОП хранить одновременно коды и данные многих активных процессов.

Простейшим решением является **свопинг** (вытеснение), при котором очередной процесс загружается в то же место ОП, которое занимал предыдущий процесс. Усовершенствованный свопинг предполагает вытеснение предыдущего процесса только в том случае, если в данный момент в ОП отсутствует свободный участок необходимого размера. В любом случае операционная система должна отслеживать состояние ОП, которая в каждый момент времени представляет собою пеструю картину чередования занятых и свободных участков.

Обычно все свободные участки ОП перечисляются в списке, упорядоченном начальному адресу. При поступлении запроса менеджер ОП просматривает этот список и выбирает для выделения процессу свободный участок по одному из следующих алгоритмов:
- "первый подходящий": когда из спика выбирается первый пригодный участок
- "следующий подходящий": отличается от предыдущего алгоритма тем, что адрес выбранного участка запоминается в качестве начальной точки просмотра списка при слудеющем обращении с таким же запросом
- "наименее подходящий", когда выбирается наибольший по размеру подходящий участок
- "быстрый подходящий", в котором поддерживается несколько списков некоторых наиболее часто запрашиваемых размеров

## Управление виртуальной памятью
Размер оперативной памяти современных ВС не позволяет выполнить очень большие программы, требующие широкого диапазона используемых адресов памяти. Для решения этой проблемы в ОС вводится понятие **виртуального адресного пространства**, поддерживаемого виртуальной памятью.

Реальное выполнение программ происходит только с использованием оперативной памяти, поэтому в ОС должен существовать менеджер виртуальной памяти, отображающий виртуальные адреса на адреса ОП. 

В настоящее время наиболее широко используется страничная и сегментная организация виртуальной памяти.

### Страничная организация

Всё пространство виртуальных адресов разделено на части, называемые **страницами**. Соответствующие единицы в ОП называются **страничными блоками**.

Размер страницы в разных системах колеблется от 512 байт до 64 Кб. Все страницы хранятся во внешней памяти, но в каждый момент времени часть страниц присутствует в виде копий в страничных блоках ОП.

Отображение виртуальных страниц на страничные блоки осуществляется с помощью таблицы страниц. При ображение в программе к некоторой странице специальный диспетчер памяти определяет наличие или отсутствие этой страницы в ОП. Если страница присутствует, то формируется реальный адрес в ОП, по которому и производится необходимое действие. 

Если страница отсутствует, то с помощью таблицы страниц находится требуемая страница во внешней памяти, которая и загружается в ОП.
Перед загрузкой требуется освободить для неё место в ОП. Для этого  из одного из страничных блоков страница должна быть "вытеснена" во внешнюю память. При выталкивании используются следующие алгоритмы замещения страниц:
- NRU -- выталкивается не использовавшаяся в последнее время страница
- FIFO -- выталкивается самая старая страница
- LRU -- выталкивается не использовавшаяся дольше всего страница
- NFU -- выталкивается редко использовавшаяся страница


### Сегментная организация
В отличие от страничной организации, при сегментной организации виртуальное адресное пространства, а также пространство ОП разбивается на сегменты, которые могут иметь различный размер.

Реализация сегментной памяти наряду с преимуществами создаёт дополнительные проблемы: например, при смене сегментов в ОП возникает лишняя фрагментация, требующая уплотнения.

В некоторых системах (MULTICS) предельный размер сегмента очень большой, поэтому в пределах сегмента реализована страничная организация памяти.

## Файловые системы
Потребность долговременного хранения в ВС больших объемов информации не может быть удовлетворена просто за счет использования виртуального адресного пространства.

Для такого хранения информации в операционных системах вводится понятие **файл**. Под файлом понимается совокупность элементов информации, сгруппированных под общим именем для хранения и использования в информационно-вычислительных системах.

Совокупность определенным образом организованных файлов, а также средства управления этой совокупностью называются **файловой системой**.

Конечного пользователя интересует только удобство работы с файлами и безопасность файловой системы. Внутренняя организация, размещение файлов на внешнем носителе информации, оптимизация использования внешней памяти ВС, как правило, скрыты от пользователя.

ОС поддерживает **логическую и физическую организацию** файлов.

**Логическая** организация принимается во внимание пользователем при программировании приложений и подразумевает логическую структуру данных и способ доступа к этим данным.
Различают
- последовательную
- индексно-последовательную
- прямую
- библиотечную
организации данных.

Способы доступа к данным бывают
- **базисные** -- наиболее быстрые. Используются для обмена большими порциями информации между внешней и основной память. однако требуют от программиста дополнительной работы.
- **с очередями**: в максимальной степени освобождают программиста от рутинной работы, такой как блокирование и разблокирование, буферизация и т.д., возлагая эти обязанности на ОС.

**Физическая** организация данных отражает особенности размещения данных во внешней памяти, а также учитывает алгоритмы записи и чтения при обращении к устройству.

Единица хранения информации на внешнем устройстве называется **записью**. Различают записи фиксированной, переменной и неопределенной длины. Для выполнения операций записи и чтения записи могут быть объединены в блоки. Блоки могут занимать непрерывные участки памяти или представлять собою связные списки. В последнем случае более эффективно используется внешняя память, но усложняется алгоритм обслуживания таких записей.

### Структура файловой системы

Файловые системы большинства современных ОС имеют древовидную иерархическую структуру, которая обеспечивает уникальность имени файла для всей системы. Это свойство особенно важно для многопользовательских ОС. Для построения такого дерева вводится особый тип файлов: **файлы-каталоги**.


**Файл-каталог** содержит записи, обычно фиксированной длины, каждая из которых описывает характеристики включенного в этот каталог файла (имя, размер, адрес размещения , права доступа и др.). Поддержка структур данных, обеспечивающих функционирование древовидной структуры, является одной из важнейших задач файловой системы ОС.


## Оболочки операционных систем
В современных ОС **программы-оболочки** являются важнейшей частью и выполняют как внутренние функции, связанные с координацией работы остальных рассмотренных ранее частей ОС, так и функции создания и поддержки интерфейса пользователя.

Во всех операционных системах основным интерфейсом является **командная строка**, которая содержит запросы пользователя на выполнение определенных действий со стороны операционной системы. Ввод запроса в виде команд или группы команд выполняется через терминал пользователя в ответ на приглашение оболочки ОС.

Взаимодействие с операционной системой приложений осуществляется путем так называемых **«системных вызовов»**, размещаемыхв нужных местах программы приложения. Для реализации сложных запросов со стороны пользователя (а также и со стороны приложений) в оболочку включаются дополнительные средства программирования ветвящихся и циклических алгоритмов.

Эти средстве (внутренние команды оболочки) составляют особый язык программирования, позволяющий писать на нём процедуры (скрипты), к которым можно обращаться как из командной строки, так и из приложений.

Другим возможным интерфейсом пользователя является **графический (оконный) интерфейс**, реализуемый отдельной графической оболочкой, более удобный для пользователя, но обладающий меньшими возможностями по сравнению с командной строкой.

## Средства генерации ОС
Любая операционная система поставляется в виде **дистрибутивов** – набора модулей на сменном носителе информации. Из этих модулей собираются все части ОС, которая будет функционировать на определенной аппаратной платформе в вычислительной системе с определенной конфигурацией оборудования.

Процесс такой сборки и называется **генерацией** ОС. В процессе генерации кроме конфигурации оборудования и его характеристик устанавливаются различные параметры будущей системы, различные ограничения (например, max количество пользователей в системе, max число процессов, запущенных с одного терминала, квоты времени и памяти и т.д.), а также значения параметров по умолчанию. 

Генерация может осуществляться в несколько этапов.

Иногда часть работы по генерации совмещается сзагрузкой системы. К задачам генерации близки задачи резервного копирования и восстановления системы после сбоев или некорректных действиях пользователя.

# Введение в ОС UNIX

## Состав ОС UNIX
Собственно операционной системой является **ядро**. Оно управляет всеми доступными ресурсами и доступом к аппаратным средствам вычислительной системы. Ядро состоит из модулей, каждый из которых имеет интерфейс с одним из компонентов аппаратных средств. Эти модули обеспечивают программам доступ к процессору, оперативной памяти, дискам, терминалам, сети и т. д. В случае установки в вычислительной системе новых типов устройств в ядро включается новый программный модуль.

Типичное ядроUNIXсостоит из двух секций. Первая секция практически инвариантна по отношению к аппаратуре, чем обеспечивает переносимость системы. Вторая секция включает модули, работающие непосредственно с аппаратурой. Незначительный объем ядра (~ 10000 операторов Си и ~1000 Ассемблера) достигается тем, что в нем реализовано ограниченное число простых функций (примитивов).


### Инструментальные средства и приложеня

Наиболее ярко модульный принцип организации системы UNIXпроявляется именно на этом уровне. Каждая команда системы UNIX выполняет определенное действие, а некоторая совокупность образует своего рода"инструментальный ящик" (a tool box) или просто "инструмент." Если необходимо выполнить некоторое задание, следует просто извлечь соответствующие инструменты. Сложные задачи могут быть решены посредством объединения в единое целое подходящих инструментов.

С самого начала "инструментальный ящик" системы UNIX включал больше, чем только базовые команды для управления системой. Система UNIX имеет также утилиты для 
- электронной почты `mail`, `mailx`
- редактирования файлов `cd`, `ex`, `vi`
- обработки текстов `sort`, `grep`, `we`, `awk`, `sect`
- форматирования текста `nroff`
- разработки программ `cc`, `make`, `lint`, `lex`
- управления программами `sees`, `res`
- внутрисистемных коммуникаций `uucp`
- сбора учетной информации о процессах и пользователях `ps`, `du`, `acctcom`

Поскольку среда пользователя системы UNIX была реализована интерактивной, программируемой и модульной, то в случае необходимости в пользовательский инструментарий могут быть легко разработаны и включены новые утилиты, а ненужные инструменты исключены без какого-либо ущерба для ОС

## Вход в систему
Система UNIX идентифицирует каждого пользователя с помощью **имени пользователя** (входного идентификатора ID). Администратор может задать пользователю исходный пароль, который он в состоянии со временем изменить, или пользователь может установить себе пароль сам. Только администратор имеет право исключить пароль из строки пользователя в файле регистрации пользователей.

После входа в систему пользователь может вводить команды. Shell интерпретирует, а операционная система организует их выполнение. Любое сообщение, появляющееся при выполнении команды, выводится на экран терминала.

По окончании работы и выходе из системы термнал освобождается, и с него в систему может войти другой пользователь.

### Типичный сеанс (сессия) работы с системой
```bash
login: user1 <Return>  # вход в систему
password: 

# сведения об операционной системе
# новости

$ commands  # выполнение требуемый действий

$ exit # или <Ctrl> + <d>
login:  # выход из системы
```

Когда приглашение `login` появилось, пользователь должен ввести своё входное имя. 

Если появилось приглашение `password`, следует ввести пароль. Для обеспечения секретности набираемый на клавиатуре пароль не высвечивается на экране. При вводе идентификатора и пароля клавиша `<#>` вызывает возврат курсора на один символ назад, а клавиша `<@>` удаляет всю вводимую строку.

При первом входе в систему может оказаться так, что пользователь должен установить пароль. Пароль должен соответствовать следующим требованиям
- состояить минимум из шести символов
- по крайней мере два из шести первых символов должны быть буквами
- по крайней мере один из шестипервых символов должен быть не буквой

После первого ввода пароля система попросит пользователя повторить ввода для проверки правильности введенног пароля. Затем она снова выдает приглашение для входа, и он может войти в систему, задав новый пароль.

## Формат командной строки

### Синтаксис:
```bash
$ команда [-опции] [аргументы] <Return>
```
После появления на экране приглашения shell'а в виде символа `$`, можно вводить команду. Имя команды всегда является первым словом в командной строке. Многие команды допускают использование необязательных опций, расширующих их функциональные возможности, а также аргументов в виде строки текста, имени файла или имени каталога. Перед необязательными опциями обычно ставится дефис `-`

### Примеры
```bash
$ date  # аргументы отсутствуют
Fri Jul 1 11:10:45 EDT 1995

$ echo Hello!  # один аргумент
Hello!

$ bannerHi  # неверный синтаксис
sh: bannerHi: not found

$ ls -F  # одна опция
dira/ dirb/ f1 f2 prog1* prog2* 
```

**Пробел** используется как разделительн имён команд, необязательных опций и аргументов. Между разделяемыми компонентыми командной строки допускается задание одного или более пробелов, для ввода которых используются клавиши `<Space>` или `<Tab>`.

Ввод каждой команды завершается нажатием клавиши `<Return>`/

> **Внимание**! При вводе команд система UNIX делает различие между регистрами клавиатуры! Большинство команд и опций вводятся в нижнем регистре.


> **Внимание**! В одной командной строке можно набрать более одной команды, разделив их точкой с запятой:

```bash
$ ls;pwd
```

## Файловая система UNIX
**Файл** представляет собой некоторый связный в логическом отношении набор данных, хранящийся на устройстве массовой памяти, обычно дисковой, и имеющий имя. Поскольку рассматривается система UNIX, то файл это не более чем представление данных в виде совокупности байтов. Там нет по сути заранее определенных записей, полей, меток окончания записей или файлов. Это обеспечивает определенную гибкость для разработчиков приложений, которые сами определяют внутренние характеристики файлов.

**Обычный файл** обычно содержит текст в кодах ASCII и создаётся с помощью текстового редактора с терминала.

**Файл программы** представляет собой обычный файл, содержащий исполняемые инструкции. Он может включать объектный код, который не может быть выведен на экран дисплея терминала (`mail`, `who`, `date`) или содержит команды shell системы UNIX и называемый обычно **shell-процедурой**, которая может быть выведена на терминал (`profile`, `logout`)

**Каталог** представляет собой специфический файл, содержащий в себе имена файлов и каталогов. В каждом элементе каталога хранится также **номер описателя файла** (индексного дескриптора файла), с помощью которого идентифицируется местонахождение файла с соответствующими данными.

**Файл устройства** представляет собой специальный файл, который обеспечивает интерфейс между ядром системы и реальным внешним устройством. Поскольку такие файлы выполняют функции интерфейсов, они никогда не содержат реальных данных. Обычно эти файлы находятся в каталоге `\dev`, т.е. в нём будет находиться файл для каждого внешнего устройства, с которым взаимодействует компьютер.

### Что можно делать с файлами?
```bash
ls  	# просмотр характеристик файла
cat  	# просмотр содержимого файла
more  	# поэкранный просмотр содержимого файла
cp	# копирование файла
mv	# переименование файла или каталога
mv	# перемещение файла в другой каталог
ln	# создание ссылки на файл (файла-псевдонима)
rm	# удаление файла
```

### Задание имен файлов
Имя файла обычно не может быть больше 255 символов. Имя обычно включает буквы (a-z, A-Z), цифры от 0 до 9, точку, дефис и нижнее подчеркивание. Многие другие символы имеют специальное назначение в shell'е, такие, как, например, пробел или слэш, и поэтому не могут использоваться при задании имен файлов. Другими специальными символами являются *, <, >, $, |. Их использование в именах файлов часто может привести к неожиданным результатов.

Имена файлов. состоящие из двух слов, объединяются символом подчеркивания. Например,
```bash
$ cd a_dir
``` 
-- правильный синтаксис, в команде `cd` указан один аргумент.

В системе UNIX точка `.` представляет собой обычных символ и поэтому может использоваться внутри имени файла любое число раз, например, `a.bcdefgh`, `a.b.c.d`, `a...b`. Она имеет особое значение только тогда, когда является *первым* символом имени файла и в этом случае определяет *невидимый файл*. Имена файлов, начинающиеся с точки, могут быть выведены командой `ls -a`.

Подобно картотеке, иерархическое построение файловой системы UNIX обеспечивает простой и эффективный механизм организации файлов. Поскольку дистрибутив системы UNIX обычно включает в себя сотни файлов и программ, их организация в виде иерархической структуры позволяет каждой версии системы UNIX поддерживать единообразную организацию каталогов. Вершина иерархии определяется как корень (root) каталога и помечается знаком слэш `/`

Система UNIX имеет набор команд, позволяющих легко создавать новые каталоги, а также перемещать или копировать файлы из одного каталога в другой. 

В некоторых ОС файловая система была реорганизована в двух основных направлениях -- файлы различаются как статические и динамические.

### Статические файлы
Они являются разделяемыми. В этой части файловой системы существуют три важнейшних каталога: `/opt`, `/usr` и /sbin.

**/opt** содежит приложения и программные продукты. Разработчики приложений и администраторы системы используют этот каталог для инсталляции новых программныз продуктов или приложений.

**/usr/bin** содержит программы для всех команд, которые необъодимы для выполнения основных действий с системой UNIX и работы с файлами. Они обычно доступны для всех пользователей.

**/usr/sbin** содежит программы для команд системного администратора. Для использования большинства из них пользователь должен иметь привилегии суперпользователя.

**/usr/lib** содержит разделяемые и архивные библиотеки, используемые для приложений.

**/usr/share** содержит независимые от поставщика системы файлы (наиболее важный -- описание системы)

**/usr/share/man** содержит все файлы, связанные с оперативным справочником команд

**/usr/local/bin** -- программы и утилиты для локального применения

**/usr/contrib.bin** -- общедоступные программы и утилиты. Их список можно найти, обратившись к сервисному информационному бюллетеню или группе пользователей

**/sbin** содержит специальные команды, используемые для запуска и останова системы


### Динамические файлы
Являются личными, то есть не разделяемыми. В этой части файловой системы находятся семь важнейших каталогов: /home, /etc, /sta/id, /tmp, /dev, /mnt и /var.

**/home** -- каждый пользователь системы UNIX должен быть зарегестрирован. Наряду с идентификатором и паролем системный администратор создаст для пользователя его собственный каталог. Каталог /home обычно содержит по одногому подкаталогу для каждого зарегестрированного пользователя. После входа в системы он оказывается в своём каталоге, поэтому он называется HOME-каталогом или **входным** каталогом. 

Пользователь может изменить своё положение в файловой системе. Как минимум, у него будет возможность доступа ко всему, что находится в каталоге /home; как максимум, он сможет переходить в *любой* каталог иерархии (по умолчанию). Прерогативой администратора системы остаётся ограничение доступа пользователя к особым каталогам системы.

**/etc** содержит множество конфигурационных файлов системы.

**/stand/vmunix** хранит программу, представляющую собой ядро системы UNIX. Оно загружается в память при запуске системы и управляет всеми действиями пользователей при работе с системой.

**/tmp** используется как рабочее пространство памяти для ОС, которая нуждается в создании своих рабочих файлов. /tmp очищается при перезагрузке. Следует заметить, что файлы, находящиеся *в любом* каталоге с именем tmp, могут быть удалены *в любой момент времени*.

**/dev** содержит файлы, представляющие внешние устройства, которые могут быть подключены к системе. Поскольку эти **файлы** играют роль шлюзов по отношению к внешним устройствам, то соответствующие данные никогда напрямую не хранятся в файлах устройств. Такие файлы часто называются **специальными файлами** или **файлами устройств**.

**/mnt** используется для монтирования других устройств

**/var/main** содержит "почтовый ящик" для каждого пользователя, для которого поступают сообщения по электронной почте

**/var/news** включает все файлы, содержащие сообщения о текущих новостях системы. Их содержимое будет выведено на экран при запуске команды `news -a`

**/var/tmp** используется в качестве рабочего пространства памяти для пользователей.

### Точка .
Элемент каталога, называемый **точка**, представляет текущий каталог. Если в настоящий момент времени пользователь находится в каталоге `/home/user3`, то `./memo/f1` представляет `/home/user3/memo/f1`.

### Две точки ..
Элемент каталога с именем `..` определяет каталог, непосредственно предшествующий текущему каталогу и часто называемый **родительским каталогом**. Каждый каталог может содержать несколько файлов и подкаталогоы, но всегда имеет только один родительский каталог. Вследствие этого не возникает никакого беспорядка при перемещении вверх по ирерархии каталогов.

Корневой каталог `/` подобен любому другому и включает в качестве элементов одновременно и одну, и две точки. Однако поскольку корневой каталог не имеет родительского, двойная точка ссылается на себя.

### Основные команды файловой системы
```bash
pwd	# выводит имя текущего каталога
ls	# выводит списко файлов и каталогов, находящихся в текущем каталоге
cd	# изменяет текущих каталог пользователя
find	# поиск файлов
mkdir	# создать каталог
rmdir	# удалить каталог
```

### Команда `ls` -- вывод содержимого каталога
Команда `ls` используется для вывода списка имён файлов и каталогов. Если команды вводится без аргументов, она выводит на экран дисплея имена файлов и каталогов, содержащихся в текущем каталоге.

В команде `ls` можно задавать аргументы, задающие как относительное, так и абсолютное маршрутное имя файла или каталога. В случае задания маршрутного имени файла она выдаёт информацию, связанную с указанным файлов. Аналогично её действие по отношению к каталогу: выдаётся содержимое соответствующего каталога.

Команда `ls` допускает также задание ряда опций, которые обеспечивают вывод дополнительной информации. В командной строке могут быть заданы одновременно несокльок опций для вывода более подробной информации о файле или каталоге.

`-a` выводит имена всех файлов, включая файлы с точкой. Обычно **файлы с точкой** невидимы, если в команде не задана опция `-a`. В общем случае они содержат информацию о конфигурации в рамках сеанса работы пользователя или приложений.

`-d` вычисляет характеристики каталога вместо представления его содержимого

`-l` представляет полный перечень атрибутов, характеризующих каждый файл, включая тип, права доступа, количество ссылок, владельца, группу, размер в байтах, дату последней модификации и имя

`-F` добавляет знак `/` к имени каждого файла, являющегося каталогом и `*` к имени каждого исполняемого файла

`-R` рекурсивно перечисляет файлы в данном каталоге и во всех подкаталогах

### Команда `cd` -- изменение текущего каталога
Если команда `cd` задана без аргументов, то пользователь окажется в home-каталоге.

В POSIX Shell имеется возможность запомнить имя предыдущего каталога. Команда `cd`, как и ожидается, изменяет текущий каталог, но одновременно обладает дополнительными возможностями, позволяющими сократить длины вводимых командных строк.

>**Внимание**! При использовании команды `cd` время от времени следует выполнять команду `pwd`, чтобы определить своё местоположение в иерархии.

```bash
$ pwd
/home/user3/tree
$ cd /tmp
$ pwd
/tmp
$ cd -
/home/user3/tree
```

### `mkdir` и `rmdir` -- создание и удаление каталогов
При создании каждого каталога автоматически создаются два подкаталога с именами `.` и `..`, представляющие текущий и родительский каталоги. Создаваемые каталоги не изменяют положения пользователя в иерархии файловой системы.

По умолчанию, когда задаётся имя задаваемого каталога, все промежуточные каталоги уже должны существовать. В противном случае можно использовать следующую опцию:

`-p` создаются промежуточные каталоги, если они до этого не существовали

### Команда `grep`/`egrep` -- поиск строк в файле по шаблону

В шаблон могут входить обыкновенные символы (представляющие сами себя), а также спецсимволы:
- `.` -- любой произвольный символ
- `*` -- множитель (замыкание Клини)
- `.*` -- любая последовательность символов
- `^шаблон` -- привязывает шаблон к началу строки
- `шаблон$` -- привязывает шаблон к концу строки
- `[символы]` -- любой один символ из тех, что внутри скобок

**Пример**: вывести всех привилегированных пользователей:
```bash
egrep ':0:0:' /etc/passwd
```

Вывести всех непривилегированных пользователей:
```bash
egrep -v ':0:0:' /etc/passwd
```

Вывести всех пользователей, имена которых начинаются с букв a, b, e, d
```bash
cat /etc/passwd | grep "^[abed]"
```


### `find` -- найти файл в дереве каталогов
`find` рекурсивно обходит указанные каталоги и файлы, проверяет для низ выполнение указанных условий и может вдобавок выполнять с найденными файлами указанные действие. Например, самое простое -- распечатать имя файла.

```bash
find файл [...] ключи/условия/действие
```

#### Ключи-условия команды `find`:
- `-name "*.c"` -- простое имя подходит под шаблон *.c
- `-type f` -- брать только обыкновенные файлы
- `-type d` -- брать только каталоги
- `-size +500` -- файлы размером БОЛЬШЕ 500*512 байт
- `-mtime -3` -- дата модификации МЕНЬШЕ 3-х дней
- `-newer filename`-- дата модификации искомого файла МЕНЬШЕ, чем у заданного файла filename
- `-print` -- распечатать маршрутное имя файла
- `-exec` -- команда над файлом {} \;

> **Внимание** команда `find` использует стандартные shell'овские шаблоны, в то время как `grep` использует регулярные выражения 


#### Примеры
Напечатать имена всех обыкноченных файлов, изменившиеся за последние 4 дня в текущем каталоге и его подкаталогах
```bash
find . -type f -mtime -4 -print
```

Уничтожить все файлы с окончаниями `*.bu`, `*%`, которые не менялись больше месяца.

```bash
find / \( -name "*.bu" -o -name "*%" \) -type f \ -atime +30 -exec rm {} \;
```

Запись `rm {} \;` обозначает команду Unix `rm`, которая будет выполняться для всех таких найденных файлов. Вместо `{}` каждый раз будет подставляться имя найденного файла.

